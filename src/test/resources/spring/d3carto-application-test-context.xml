<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xmlns:elasticsearch="http://www.springframework.org/schema/data/elasticsearch"
       xmlns:batch="http://www.springframework.org/schema/batch"
       xsi:schemaLocation="http://www.springframework.org/schema/data/elasticsearch http://www.springframework.org/schema/data/elasticsearch/spring-elasticsearch-1.0.xsd
		http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd
		http://www.springframework.org/schema/batch http://www.springframework.org/schema/batch/spring-batch.xsd">
		
	<!-- S P R I N G    B A T C H    C O N F I G U R A T I O N -->
	<import resource="d3carto-job-test-database.xml" />
	<import resource="d3carto-job-test-context.xml" />

	<!-- T A S K L E T S -->
	<bean id="extractDatasTasklet" class="com.simon.d3carto.batch.tasklet.ExtractDatasTasklet"
		scope="step" />
	<bean id="transformDatasTasklet" class="com.simon.d3carto.batch.tasklet.TransformDatasTasklet"
		scope="step" />
	<bean id="loadDatasTasklet" class="com.simon.d3carto.batch.tasklet.LoadDatasTasklet"
		scope="step" />

	<!-- J O B -->
	<!-- Job features : 
		-> EXTRACT: Retrive environments datas (configuration file) 
		-> TRANSFORM: Create a POJO from all configuration file 
		-> LOAD: Push data into NoSQL DB (ElasticSearch) -->
	<batch:job id="d3CartoJob">
		<batch:step id="extractDatas">
			<batch:tasklet ref="extractDatasTasklet" />
			<batch:next on="*" to="transformDatas" />
		</batch:step>
		<batch:step id="transformDatas">
			<batch:tasklet ref="transformDatasTasklet" />
			<batch:next on="*" to="loadDatas" />
		</batch:step>
		<batch:step id="loadDatas">
			<batch:tasklet ref="loadDatasTasklet" />
		</batch:step>
	</batch:job>

</beans>